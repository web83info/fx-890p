## GALAXY WALL FX-890P

PJ誌上でPC-E200、PC-E500と発表されて、「TWIN」まで製作されている名作に「GALAXY WALL」があります。思わずはまってしまいます。

CPU（CASIO POWER USER）を名乗る私は（冗談ですよ）、友人Fや全国の「FX-890P/Z-1しか持ってないよー。」という人のために開発を始めたのでした。また、今、流行（はや）りの「Z-1GR」にも対応している予定です。（少なくとも文字化けはしません）
なお、この場を借りてオリジナルの作者の咳止組さんとPC-E500版の作者の佐伯俊道さんに感謝いたします。

## プログラムの入力方法

マシン語で組まれております。まずマシン語エリアを確保します。BASICかCALで、

```
CLEAR 1024,1792,4096
```

と入力します。そしてプログラムリストを、活研モニタやROMモニタなどを使って、2000H～26FFHの範囲を打ちこんでください。

打ち終わったら、必ず外部記憶装置に保存してください。保存しましたね？実行は、

```
DEFSEG=0
CALL &H2000
```

です。くれぐれも入力するアドレスに注意してください。

| 項目 | 内容 |
| --- |--- |
| 必要メモリー領域 | &H2000〜&H26FF, 1792（&H0700）バイト |
| 　プログラム領域 | &H2000〜&H26FF, 1792（&H0700）バイト |
| 　ワークエリア領域 | &H2700〜&H26FF, 0（&H0000）バイト |
| メモリー領域確保コマンド | ```CLEAR 1024,1792,4096``` |
| マシン語保存コマンド | ```BSAVE "FILENAME",&H2000,1792,&H2000``` |
| マシン語読込コマンド | ```BLOAD "FILENAME",&H2000``` |
| マシン語実行コマンド | ```DEFSEG=0```<br>```CALL &H2000``` |

## 遊び方

一連のシリーズと同じです。[8]と[2]で左端の自機を上下に動かします。[SPACE]で弾を打ちます。最初は2連射です、といっても画面に同時に出現できる弾の数が2つということです。（私は最初、一回[SPACE]を押すと弾が2つでると思っていました）

弾は右に飛んでいき、ブロック（インセキと書かないのは、JFPの辞書にないから）にぶつかると、同化します。縦一列にブロックが揃うとそのラインは消滅します。消滅したラインより左に列がある場合、消滅したラインより左のラインは右に移動します。

ラインが自機の所までくるとゲームオーバーです。なお、[6]でブロックを高速に左移動させることができます。

10ライン消すごとに右からアイテムが流れてきます。自機と重なると取ることができます。アイテムは時間制で複数のアイテムを併用することはできません。

ラインを消すと自機からの距離に応じてスコアが加算されます。

一応、重要なファクター（ポーズ）は見落としていません。[P]を押すとポーズがかかり、[RET]で解除します。リプレイは［RET］です。

## アイテムの種類

4種類のアイテムがあります。その内の2つはおじゃまアイテムです。表1にアイテムの種類をまとめておきます。

## プログラム

オールマシン語ゲーム二作目です。本当はBASICとLINKしようと思っていたのですが（スコアの表示など）、某氏の記事を読んでやめました。例によってソースリストを公開しますので（リスト2）、初心者の方は参考にして、上級者の方はアドバイスをください。なお、表2にアドレスマップ、主要なラベルとルーチンの解説をつけます。

## 表

### 表1：アイテム

| 種類 | 効果 |
| --- | --- |
| ① | 自機の弾が単発になります。 |
| ※ | 一定時間動けません。但し、弾は撃てます。 |
| ③ | 自機の弾が３連射になります。 |
| ④ | 自機の弾が４連射になります。 |

### 表2：アドレスマップ

| アドレス | ラベル | 解説 |
| --- | --- | --- |
| 2000H | START | 初期設定 |
| 2055H | L_1 | スクロ－ルスピ－ド計算、乱数の種、自機消去 |
| 20A5H | L_K | ”STOP！”チェック、上移動 |
| 20B5H | L_2 | 下移動 |
| 20C6H | L_S | 自機表示 |
| 20D3H | PS_CHK| ポ－ズチェック |
| 210CH | L_3 | ［スペ－ス］押したらショットする |
| 2145H | L_4 | スクロ－ルする |
| 2170H | NEWBL_1 | NEW　BLOCK出現 |
| 2197H | L_5 | 弾移動 |
| 21E9H | SHM_P | 弾表示 |
| 21F2H | SHM_N | 弾移動メイン |
| 2209H | SHM_3 | 弾移動ル－プ |
| 2215H | ATA_1 | 当り判定 |
| 2229H | ATA_S | 黒いもの表示 |
| 2240H | ATA_2 | BRAM移動ル－プ |
| 2248H | ATA_3 | ATA_2補助 |
| 225EH | ADD | スコア計算＆アイテム出現判定 |
| 22B4H | SHM_4 | ショット回ル－プ |
| 22BFH | L_6 | アイテム処理 |
| 230FH | ITEM_1 | アイテム獲得 |
| 2338H | ITEM_2 | アイテム表示 |
| 233EH | ITEM_3 | アイテム時間切れ判定 |
| 2351H | ITEM_4 | 自機表示 |
| 2368H | OVER_1 | ゲ－ムオ－バ－判定 |
| 2390H | NO_OVER | ゲ－ムオ－バ－ではない |
| 2396H | BDISP | VRAM→LCDC |
| 2415H | BRAMPUT | BRAM→VRAM |
| 2440H | PRINT | PRINT |
| 244DH | FONTS | 自己書き換え対象（FONTS＋1） |
| 2459H | FONTO | 自己書き換え対象（FONTO＋1） |
| 2478H | PUT8CHR | 8×8ドット表示 |
| 2497H | GPRINT | GPRINT |
| 24D9H | XY | 座標（AH、AL）→BP |
| 24E9H | RND | DL＝0ー255 |
| 24ECH | RNDDT | 自己書き換え対象（RNDDT＋1） |
| 250EH | INKEY | 同時キ－入力 |
| 259BH | SUJI | DX　10進4桁表示 |
| 25BCH | WARI | 16bit　割算 |
| 25DDH | CHR8 | キャラ、文字デ－タ |
| 269DH | BRAM | ワ－クエリア |
