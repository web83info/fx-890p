# NAP（Number-place Auto-answering Program）

## プログラムの紹介

パズル雑誌ではおなじみの「ナンバープレース」（通称ナンプレ）を自動的に解くプログラムを作りました。懸賞に応募するのに使っても、問題が本当に解けるかどうかのチェックに使ってもいいと思います。ちなみに「NAP」とは「Number-place Auto-answering Program」の略であり、「昼寝」という意味の英単語でもあります。うたた寝をしていても、ポケコンがナンプレを解いてくれます。

## ナンバープレースとは

縦9列、横9行、太線で囲まれた３×３のブロックのそれぞれに1～9の数字が一つずつ入るように数字を埋めていくパズルです。

## 対応機種

FX-890P/Z-1/Z-1GRとその100%互換機で動きます。

## 入力方法

プログラムはマシン語で組まれています。BASICかCALモードで、

```
CLEAR 1024,2087,6144
```

と入力して、マシン語エリアを確保します。次にプログラムリストを入力します。これはBASICプログラムですから、普通に入力してください。実行すると、マシン語プログラムが書き込まれますが、もし入力ミスがあると途中でストップしてしまいます。その時は誤りがある行が表示されますので、修正して再実行してください。書き込みが終わったら、FDにバイナリでセーブしておくと、次からの読み込みに便利です。

起動は

```
CALL&H2000
```

です。

## 使い方

起動するとタイトルが表示された後に、問題の入力画面になります。画面の左はナンプレの上から1,2,3行目、真ん中は4,5,6行目、右は7､8､9行目に対応します。数字の0が埋まっているところは､空きマスの意味です。テンキーとカーソルキーを使って数字を入力してください。この時[CLS]を押すと、画面を消去してプログラムを終了します。

問題の入力が終わったら、[RET]を押してください。後は自動的に答えを出してくれます。問題を解くのにかかる時間は、速いもので２秒、遅いものでも３分くらいです。

問題の入力に不備があったり、解けない問題を入力したときには、[ERROR]の表示が出ます。答えが唯一に定まらないときは、[SORRY]の表示が出ます。きちんと解けるときには[CLEAR]の表示が出ます。答えを確認したら[RET]で次の問題入力に進むか、[CLS]でプログラムを終了するかしてください。この時は画面を消去しません。

プログラム中では、高速化のため[BRK]と電源キーのチェックをしていません。ご注意ください。

## アルゴリズム

ナンプレを解くに当たって、内部ではレベル1からレベル3までの三段階に分けて解析しています。ポケコンがナンプレを解いている間は、画面の左端のインジケータ部分に、今どのレベルで解析しているかを表示しています。上から順にレベル1, 2, 3を表わしています。実際の解き方は市販のパズル雑誌などをご覧ください。ソースは公開しますので、参考になったらそうしてください。

## おまけ

MS-DOS版のソースリスト（nap_msdos.asm）も掲載します。

## 参考文献

* Z-1/FX-890P活用研究、工学社
* 市販のパズル雑誌、各社